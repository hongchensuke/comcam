WinRAR命令行版本 rar.exe使用详解

RAR 命令行语法
~~~~~~~~~~~~~~

语法

   RAR.exe <命令>  [ -<开关> ]  <压缩文件>  [ <@列表文件...> ]
       [ <文件...> ]  [ <解压路径\> ]

 

常用命令

a       添加文件到压缩文件中。

        例子:

        1) 从当前目录添加所有的 *.hlp 文件到 help.rar 压缩文件:

        rar a help *.hlp

       

2) 如果目录包含文件掩码或以反斜线结尾，将会应用普通的规则，你需要指定 -r 开关来处理它的子目录。

        下列命令会把 Bitmaps 目录中除了子目录外的所有文件添加，因为未
        指定开关 -r:

        rar a Pictures.rar Bitmaps\*

 

d       从压缩文件中删除文件。请注意，如果这个命令导致压缩文件中所有文件
        全部删除，这个空的压缩文件将被删除。


e       解压文件到当前目录。


f       更新压缩文件中的文件。 更新打包到压缩文件后被改变的文件。这个命令不
        向压缩文件中添加新文件。

u       更新压缩文件中的文件。添加不在压缩文件中的文件和更新打包后改变了的
        文件。

m[f]    移动到压缩文件中[只用于文件]。移动文件和目录会使压缩操作完成后它
        们被删除。如果使用变量'f'和/或应用开关'-ed'，则不删除目录。

v[t,b]  详细列出压缩文件内容[技术信息]。文件列出所使用的格式:绝对路径名，文
        件注释，原始和压缩后的大小，压缩率，最近更新日期和时间，属性，CRC，
        压缩方式和解压所需的最小RAR版本。当使用't'变量时可选技术信息(主操作
        系统，固实标志和老的文件版本标记)显示。变量 'b' 强制 RAR 只输出单纯
        的文件名，而没有其他任何的附加信息。

        列出所有压缩卷的内容，使用星号('*')代替压缩文件扩展名或使用'-v'
        开关。

        例子:

        1) 列出 system.rar 压缩文件的内容 (技术信息)并使用重定向符输出
           到文件 techlist.lst 中

           rar vt system >techlist.lst

        2) 列出 tutorial.rar 压缩文件的内容 (单纯文件名模式)

           rar vb tutorial

x       带绝对路径解压

        例子:

        rar x test.rar testDir\
        注意，目录名后面要跟\符号，如果没有testDir这个文件夹，会先自动创建。

如果文件已存在，若要解压后覆盖文件，则使用-o+开关，或者用-y开关。若不覆盖则用-o-开关。

 

 

常用开关

 

-ag[格式]
        使用当前的日期和时间生成压缩文件名。

        当创建压缩文件时附加当前日期字符串到压缩文件名上。用于每日备份。

        附加的字符串格式有几种可选的格式参数定义或使用"YYYYMMDDHHMMSS"。
        字符串的格式可以包含下列字符:

        Y   - 年
        M   - 月
        MMM - 使用文本字符串作为月名(Jan，Feb，等.)
        W   - 年的第几周 (每星期从星期一开始)
        A   - 星期几 (星期一 -1，星期日 - 7)
        D   - 月的第几天
        E   - 年的第几天
        H   - 小时
        M   - 分 (如果在小时后，被作为分钟对待)
        S   - 秒
        N   - 压缩文件数。RAR 搜索要生成的名字的文件是否存在，如果发现
              它已经存在，将递增一个压缩文件数字，直到生成一个唯一的名字。
              'N' 格式化字符在创建卷时不被支持。

        上面列出的每个字符串仅表示添加到压缩文件名中的一个字符。例如,
        使用  WW 表示 2 数字的星期或 YYYY 定义 4 数字的年。

        如果在格式化字符串的第一个字符是'+'，日期字符串和基本压缩文件名
        位置交换，所以日期将在压缩文件名之前。

        格式化字符串可以包含在 '{' 和 '}' 包含的可选字符。此文本插入到压
        缩文件名中。

        所有其它字符被不变地添加到文件名上。

        如果你需要更新已经存在的压缩文件，小心使用 -ag 开关。依赖于以前
        使用的 -ag 传送的格式化字符串和时间，生成的和现有的压缩文件名可
        能不匹配。在这种情况下 RAR 会创建一个新的压缩文件，而不是更新现
        有文件。


        例子:

        1) 使用默认 YYYYMMDDHHMMSS 格式

           rar a -ag backup

        2) 使用 DD-MMM-YY 格式

           rar a -agDD-MMM-YY backup

        3) 使用 YYYYMMDDHHMM 格式，替换'backup'之前的日期

           rar a -ag+YYYYMMDDHHMM backup

        4) 使用 YYYY-WW-A 格式，包含区段描述

           rar a -agYYYY{year}-WW{week}-A{wday} backup

        5) 使用 YYYYMMDD 和压缩文件数。它允许你在同一天使用 -agyymmdd-nn
           数次，每一个新的压缩文件名都将包含一个新的递增数字。

           rar a -agYYYYMMDD-NN backup

注意：以上命令会生成文件名为backup{日期字符串}.rar的压缩包，backup也可以是别的自定义名字。
若想文件名中只保留日期，只需不写backup只写.rar即可：rar.exe a CagYYYY-MM-dd  .rar 

 

-ed     不添加空目录

        这个开关指出空目录不被存储到被创建的压缩文件中。当解压这样一个压
        缩文件时, RAR 会基于他们内部的文件路径创建非空的目录。关于空目录
        的信息丢失。非空目录除了名字外(访问权限, 流, 等。)其他所有属性全
        部丢失, 所以只有在你不需要保留这样的信息时使用此开关。

        如果 -ed 和 'm' 命令或 -df 开关一起被使用，RAR 将不能移除空的目录。

 

-hp[p]  加密文件数据和头。

        这个开关和 -p[p] 类似，但是开关 -p 只加密文件数据，而使文件名等
        其它信息可见。这个开关加密所有包括文件数据、文件名、大小、属性、
        注释和其它块等所有可感知压缩文件区域，所以它提供了更高的安全等
        级。在压缩文件中使用-hp 加密，没有密码甚至不可能查看文件列表。

        例子:

        rar a -hpfGzq5yKw secret report.txt

        将添加文件 report.txt 到加密的压缩文件secret.rar中，使用密码
        'fGzq5yKw'

 

-m<n>   设置压缩模式:

   -m0   存储      添加到压缩文件时不压缩文件。
   -m1   最快      使用最快方式(低压缩)
   -m2   较快      使用快速压缩方式
   -m3   标准      使用标准(默认)压缩方式
   -m4   较好      使用较好压缩方式(较好压缩，但是慢)
   -m5   最好      使用最大压缩方式(最好的压缩，但是最慢)

        如果没有指定这个开关，RAR使用-m3方式(标准压缩)。

        默认情况下，RAR 在 -m1 和 -m2 模式中只使用常规压缩算法，高级算法
        像声音和真彩处理只有在 -m3..-m5 模式下才启用，提升的文本压缩只有
        在 -m4..-m5 中才被激活。默认值可以使用 -mc 开关替代。

 

-ms[列表]
        指定存储文件类型。

        指定不压缩而直接存贮的文件类型。这个开关被用来存储已经压缩的文件，
        这将帮助增加压缩速度，而不会显著的减小压缩率。

        可选参数 <列表> 参数定义使用分号隔开的文件扩展名列表。例如，
        -msrar;zip;jpg 将强制RAR不压缩直接存储所有的RAR和ZIP压缩文件和
        JPG 图像。它也允许在列表中指定通配符文件掩码，所以 -ms*.rar;
        *.zip;*.jpg 也可以工作。

        如果 <列表> 没有被指定，-ms 开关将使用默认的包含下列文件类型的扩
        展设置:

        7z, ace, arj, bz2, cab, gz, jpeg, jpg, lha, lzh, mp3,
        rar, taz, tgz, z, zip

 

-mt<线程>
            设置线程数。仅可用于 Window 版本。

            <线程> 参数可以是从 0 到 16 的值。它定义对于压缩算法活动线程的
            推荐数。如果它大于 0，RAR 会使用多线程版本的压缩算法，在多处理
            器系统上提供更高的速度。真实的活动线程数可能和指定的不同。

            如果 <线程> 是 0，RAR 会使用单线程压缩算法。

            改变 <线程> 参数轻微影响压缩率，所以如果所有其它压缩参数相等而
            使用不同的 -mt 开关创建的压缩文件不会解压得一样连贯。

            如果没有指定 -mt 开关，RAR 会尝试检测可用的处理器的数量并自动
            选择优化的线程数。

 

-or     如果相同名字的文件已经存在则自动重命名解压的文件。重命名文件将得
        到象 'filename(N).txt' 的名字，'filename.txt' 的位置是原始的文件
        名，如果文件存在 'N' 是从 1 增加数字。

-o[+|-] 设置覆盖模式。可以在解压或更新文件时使用。下列模式可用:

          -o           覆盖前询问
                       (默认用于解压文件);

          -o+          覆盖所有
                       (默认用于更新的压缩文件);

          -o-          跳过已存在的文件。                    

-o+     覆盖已存在的文件。
-o-     不覆盖已存在的文件。


-p[p]   压缩时，使用字符串<p>作为密码加密文件。密码大小写敏感。如果你在
        命令行忽略密码，你会看到一个输入密码的提示。

        例子:

        rar a -pmyhoney secret1 *.txt

        添加 *.txt文件并用密码"myhoney"加密.

-r      包含子文件夹，可以使用命令:
        a，u，f，m，x，e，t，p，v，l，c，cf 和 s.

        当使用命令 'a'，'u'，'f'，'m' 将处理在所有子目录中以及当前工作目
        录的中的文件。

        当使用命令 x，e，t，p，v，l，c，cf 或 s 将处理在子目录以及当前工
        作目录中所有压缩文件。


-r-     禁用递归。

        在某些情况下，即使没有指定 -r 开关 RAR 也会自动启用递归。开关 -r-
        禁止它。

        压缩时如果你指定了目录名，目录名不包含通配符，即使 -r 开关没有指定，
        默认 RAR 添加目录的内容。如果磁盘根目录没有把通配符作为文件掩码指定，
        RAR 也会自动启用递归。开关 -r- 禁用此行为。
        
        例子:
        
        rar a -r- arc dirname
        
        命令仅会添加空目录 'dirname' 目录并忽略它的内容。下列命令:
        
        rar a -r- arc c:\
        
        会仅压缩 c: 根目录的内容并不会包含子目录。

-ta<日期>
        只处理指定日期之后修改的文件。

        日期字符串的格式是 YYYYMMDDHHMMSS。它允许在日期字符串中插入'-' 
        或 ':'的分隔符，并忽略后部区域。例如，下列开关是正确的:
        -ta2001-11-20在内部它被转换成 -ta20011120000000 并作为"从2001
        年11月20日0时0分0秒后修改的区域"对待。

 

-tb<日期>
        只处理指定日期之前修改的文件。开关的格式和 -ta<日期> 相同。

-tn<时间>
        处理指定时间以后的新文件。时间字符串格式时:

        [<ndays>d][<nhours>h][<nminutes>m][<nseconds>s]

        例如，使用开关 -tn15d 来处理更新了15天的文件，-tn2h30m 来处理更
        新了2小时30分的文件。


-to<时间>
        处理指定时间以前的旧文件。开关的格式和 -tn<时间> 相同。

 

-x<f>   排除指定的文件 <f>，通配符可以用在名称和文件掩码的文件部分。你
        可以数次指定开关'-x'。

        如果掩码包含通配符，它应用到当前目录和它的子目录。没有通配符它不
        递归，所以如果你要在所有文件夹中排除某些“文件名”，你需要指定两
        个掩码:用于当前目录的“文件名”和用于子目录的“*\filename”。如果
        你知道一个文件的确切路径，你可以是使用“路径\文件名”语法来仅排除
        “文件名”的此副本。如果你在解压一个压缩文件时使用 -x路径\文件名 
        语法，“路径”必须是一个压缩文件内的路径，而不是在解压后的磁盘上
        的文件路径。

        例子:

        1) rar a -r -x*.bak -x*.rar rawfiles

        *.bak 和 *.rar 不会添加到 rawfiles 中

        2) rar a -r -x*\temp -x*\temp\* savec c:\*

        压缩 C: 上除了 Temp 文件夹中的临时目录和文件外的所有文件

        3) rar x -x*.txt docs

        从 docs.rar 解压除了 *.txt 外的所有文件

-y      对于所有询问全部回答是。

 

-?      显示命令和开关的帮助。和没有参数或输入非法命令行选项时相同。


--      停止开关扫描

        这个开关告诉 RAR 命令行中没有更多的开关了。如果压缩文件或文件名
        以 - 符号开头，可以使用它。没有'--'开关，这样的名字将被作为开关
        对待。


 

 

返回值
~~~~~~

   RAR 成功操作后返回 0 。非 0 返回码意味着操作由于某种错误被取消:

    255   用户中断         用户中断操作

      9   创建错误         创建文件错误

      8   内存错误         没有足够的内存进行操作

      7   用户错误         命令行选项错误

      6   打开错误         打开文件错误

      5   写错误           写入磁盘错误

      4   被锁定压缩文件   试图修改先前使用 'k' 命令锁定的压缩文件

      3   CRC 错误         解压缩时发生一个 CRC 错误

      2   致命错误         发生一个致命错误

      1   警告             没有发生致命错误

      0   成功             操作成功

winrar详解
[语法]
RAR <命令>  [ -<开关> ]  <压缩文件>  [ <@列表文件...> ]
RAR [ <文件...> ]  [ <解压路径\> ]

[命令]
A 增加文件到压缩包,如果省略参数A也为添加文件,但不同的是添加当前路径文件到指定路径;另外如果-AD指定的目录带有\则不会添加子目录的文件:
RAR A .\BACKUP\MYRAR -AD %WINDIR%\IME      添加IME目录的所有文件(包含子目录)到当前目录的\BACKU\目录的MYRAR.RAR中,其中开关-AD可以不用.
RAR A .\BACKUP\MYRAR -AD %WINDIR%\IME\     情况同上,只是添加时不包含子目录中的文件    
RAR MYRAR %WINDIR%\SYSTEM                  添加当前目录的所有文件(不包含子目录)到%WINDIR%\SYSTEM\MYRAR.RAR中,同时删除当前目录的文件
RAR A MYRAR @BACK.LST                      根据BACK.LST列出的文件列表来压缩文件(这个功能有时很有用,用来备份指定文件)
RAR A -DF MYRAR C:\TEMP                    添加TEMP目录的所有文件(包含子目录)到MYRAR.RAR中后删除文件
RAR A -ED MYARR C:\TEMP E:\01 F:\          同上,只是添加多个目录到压缩包中并排除空目录,

D 从压缩文件包中删除指定文件
RAR D MYRAR BOOT.INI          从压缩包MYRAR中删除BOOT.INI文件
RAR D MYRAR                   删除压缩包MYRAR中的所有文件,实际上是删除压缩包WINRAR


I 在压缩包中搜索指定的字符串,支持可选参数i不区分大小写(默认);c区分大小写;h十六进制搜索;t使用ANSII UNICODE和OEM字符表(只使用WIN32)
RAR II=boot.ini -R myrar.rar           在当前目录的myrar.rar包含其子目录中不区分大小写查找字符串boot.ini(实际是该文件)
RAR II=boot.ini -r myrar.rar *.ini     在当前目录的MYRAR.RAR包中所有的子目录中的INI文件中查找BOOT.INI字符串(实际在包中的INI文件中找字符串,MYRAR.RAR可改成*.RAR表示所有包中查找)
RAR IC="First Level" -r c:\*.rar *.txt 在C:\*.RAR包中的*.txt中查找区分大小写的字符串"First Level"(注意有空格时使用引号)
RAR IH=f0e0aeaeab2d83e3a9 -R e:\text   在E:\TEXT目录下的所有压缩包中搜索十六进制字符串f0 e0 ae ae ab 2d 83 e3 a9

K 锁定压缩包以防止任何企图改变压缩文件的命令
RAR K MYRAR.RAR

L 列出压缩包中的所有文件及其他信息如压缩率等,如果只输出文件名则使用B变量,如果要更多信息则使用T变量,如果要想获取压缩包中的文件并带路径则使用V命令
RAR LB MYRAR.RAR>c:\file.lst  把压缩包中的文件名输出FILE.LST文件中
RAR VB MYRAR.RAR>C:\FILE.LST  把压缩包中的带路径的文件名输出到FILE.LST中

M 把文件移动到压缩包中并同时删除文件(实际上和RAR A -DF等同),如果指定-ED开关则不删除目录,注意这个命令与A命令的区别
RAT M MYRAR.RAR C:\TEMP     把C:\TEMP下包含子目录的所有文件移动到压缩包中并删除TEMP目录及其中的所有文件
RAR M -ED MYRAR.RAR C:\TEMP 把C:\TEMP下包含子目录的所有文件移动到压缩包中并删除TEMP目录中的所有文件但保留为空目录

R 修复压缩文件,注意的是如果没有修复记录(可以使用RR命令添加修复记录,最大可添加524288个恢复块),那么RAR对固定压缩文件的修复可能性极小,所以建议不要使用这种方式压缩;如果要修复卷则使用RC命令
RAR R -Y T.RAR            安静模式修复T.RAR压缩包
RAR RR3% MYRAR.RAR        把压缩文件%3的大小的恢复记录添加到压缩包中,如果是批处理需要把%3改为%%3或3p,另外可以不跟变量而有RAR自己决定,如 RAR RR MYRAR.RAR(可以使用RV命令添加卷修复记录,最大可添加524288个恢复块)
RAR RC MYRAR.PART003.RAR  修复卷PART003,需要事先使用RV添加卷修复记录
RAR RV3 MYRAR.PART003.RAR 添加卷修复记录,只对卷有效,可以不用变量N让RAR自己决定;这个命令有时很有效,如给朋友传文件时只用到卷内部分资料则可使用此命令而减少传其他卷的不必要  

RN 重命名压缩包中的文件名,需要注意的是如果RN命令会忽略以存在的文件,因此使用时要特别小心,RN命令好象对于子目录中的文件会忽略(即使加-R 开关一样)
RAR RN MYRAR.RAR readme.txt readme.bak *.dll *.dl_

S 转化压缩包为自解压格式,注意的是RAR同目录里必须有default.sfx模块,如果要从自解压格式中删除自解压default.sfx模块,则使用S-命令
RAR S MYRAR.RAR

X 从压缩包中带绝对路径解压指定文件到当前路径(不带路径则使用E命令,该命令会解压包含子目录的所有文件到当前根目录,一般不会用到),可以使用-Y开关覆盖已存在文件,使用-av-疲敝身份效检注释,-c-屏蔽显示注释,-ad指定要释放的路径
RAR X -Y MYRAR.RAR                      无提示带路径解压MYRAR.RAR到当前目录
RAR X -Y MYRAR.RAR -AD C:\01\           无提示带路径释放MYIRAR.RAR中包含目录中的所有文件到指定路径C:\01中
RAR X -Y -C- MYRAR.RAR *.EXE            无提示带路径提取MYRAR.RAR包含子目录中的所有文件到当前目录
RAR X -Y -C- MYRAR.RAR *.EXE -AD C:\01\ 无提示带路径释放MYRAR.RAR包含子目录中的所有文件到指定路C:\01目录中
RAR E -Y -C- MYRAR.RAR *.EXE -AD C:\01\ 无提示释放MYRAR.RAR包含子目录中的所有文件到指定路C:\01根目录中

[-开关]
这里列举几个重要的开关:

一.实现自动备份和还原
-AD,-AP,-EP3:中-AD表示压缩指定路径的文件到压缩包中或释放压缩包中的文件到指定路径中;-AP用于设置压缩文件的内部路径;-EP3表示包括盘符在内的完整路径.
ECHO 下面的例子备份SYSTEM目录中的文件并还原:
IF NOT EXIST F:\SYSBAK MD F:\SYSBAK
ECHO 备份指定文件夹下包含子目录的所有文件并带盘符的完整路径
RAR A F:\SYSBAK\BAK.RAR -AD -EP3 %windir%\SYSTEM
RAR X -Y -EP3 F:\SYSBAK\BAK.RAR
ECHO 下面的例子把当前目录中所有的压缩包文件解压到D盘DATA下
rar x -ad *.rar d:\data\
ECHO 下面的例子添加文件'readme.txt'到目录压缩文件myrar.rar的'DOCS\ENG'目录中
RAR A -AP DOCS\ENG MYRAR.RAR readme.txt

-sfx[WinCon.SFX|Default.SFX]:创建自解压文件,如果要创建DOS下的自解压请使用WinCon.SFX模块名,缺省为WIN32,另外注意的是二者之间绝对没有空格
ECHO 下面备份IME目录的文件为DOS下可执行的自解压包并还原
RAR A -DF -EP3 -SFXWINCON.SFX MYRAR %WINDIR%\IME
RAR X -Y -EP3 MYRAR.EXE

二.按照日期来备份
-AG[格式]:使用当前的日期和时间产生压缩文件名,格式可以为YYYYMMDDHHMMSS,另外可以使用一种特殊格式N来代表备份时产生自动数字序号,这个格式也可和日期格式组合;另外如果格式的第一个字符为+则会交换基本文件名和日期格式的位置;如果要保留格式字符可以使用{}括起来
RAR A -AGYYYYMM-NN MYBAK C:\BOOT               将产生诸如MYBAK200701-01,MYBAK200701-02的备份
RAR A -AG+YYYYMMN MYBAK C:\BOOT                将产生诸如20070101MYBAK,20070102MYBAK的备份
RAR A -AGyy{year}mm{month}nn MYBAK C:\BOOT     将产生诸如mybak07year01month01,mybak07year01month02的备份
RAR A -AGYYYWWA MYBAK C:\BOOT                  将产生2007043的备份(2007年第4周星期三)

三.加密备份和恢复解密
-p[p]:压缩时加密或解压时解密,密码区分大小写,如果要使压缩包中的某些文件不加密而有些加密,则可以分步操作即先添加不需要密码的到压缩包,再使用-P开关添加需要密码的文件,或反向操作,如RAR A -P123 MYBAK C:\BOOT;RAR A MYBAK README.TXT
-HP[P]:带文件头加密,这种加密方式更安全,用户没有密码无法查看里面的文件列表等信息.
-av:添加身份效检(创建者信息,最后更新时间和压缩文件名等)到压缩包中,只有注册版才有此功能,身份效检主要用于软件发布,如果要禁止身份效检或添加身份效检可以使用-av-开关

四.压缩模式和线程
-m<n>:设置压缩模式,从底到高压缩率越高:-m0不压缩方式储存;-m1最快;-m2较快;-m3标准(默认);-m4较好;-m5最好
-ms[文件列表]:指定不压缩而直接储存压缩,如一些已经压缩的文件如果在压缩也不能减少多少体积反而占用了大量时间,一起添加到压缩包中时可以使用这个开关(如果没有指定文件列表则忽略大多少压缩格式文件)避免再次压缩,如rar a -ms*.rar;*.zip
-s创建固实压缩以进一步提高压缩率,如RAR A -S MYRAR C:\BOOT -R;如果要禁止固实压缩则使用-S-开关;如果为了减少这种压缩方式的损坏率可以不要使用这个开关或可以改用-SN开关或-SE开关(如果是分卷压缩则使用-SV开关);
-v创建或查看分卷压缩,不使用其他变量则会根据目标媒体自动分卷,如果要查看分卷则最好和V或L命令一起使用以便查看从指定开始卷的所有内容,否则只显示指定卷内容;如果要指定分卷的大小可以使用-V<大小>[k|b|f|m|g|G]变量,其中f变量是预定义大小,如RAR A -S -V1440 FLOPRAR C:\BOOT,该开关可以多次使用以便为不同的卷设置不同大小,如RAR A -V100k -V200k -V300k MYRAR,分卷压缩可以和-sfx开关一起使用创建自解压分卷格式,另外该命令不可以和命令'd'，'f'，'u'，'s'一起使用,还有就是a命令不能用来更新分卷压缩文件而只能创建新的压缩文件.
-mt<线程>:可以提高压缩速度,变量在0-16之间,如果未指定则RAR自动根据CPU数量设置,仅使用于WIN版


五.屏蔽显示有关操作开关汇总
-y :-Y对于所有询问多回答是
-inul:禁止所有消息
-o-:不覆盖已经存在的文件
-o+:覆盖已经存在的文件
-or:存在同名文件时自动添加数字标识命名文件]
-id[c,d,p,q]:禁止版权消息,禁止完成消息,禁止完成百分比显示消息,安静模式除非有错误时才提示(几个开关可以合并使用,但-IDQ可以代替其他几个参数),如RAR A -IDCD MYRAR C:\TEMP仅显示完成百分比
-c-:禁止显示注释
-cfg-:忽略配置文件和RAR环境变量
-cl:转换文件名为大写字母
-cu:转换文件名为小写字母

六.有关目录开关和排除开关汇总
-ED,-EP,-EP1,-EP3:-ED排除空目录;-EP排除所有目录名但不排除里面的文件(排除后如果路径中有同名文件将会在压缩包中看到很多同名文件)如把C:\TEMP下包含子目录的文件全部压缩到MYRAR.RAR根目录RAR A -EP MYRAR.RAR C:\TEMP;-EP1彻底排除所有的路径名称(本人用这个命令好象没有任何效果);-EP3包含磁盘的完整路径,这个开关在压缩包里磁盘显示为_如C_,使用命令是可还原为C:的样式,常用来备份和恢复系统
-R,-R0:都是包含子文件夹,可以和很多命令如A,U,F,M,X,E,T,P,V,L,C,CF,S等一起使用(前四个命令将处理工作目录和所有子目录的文件,其他命令则处理工作目录及目录的压缩文件),但是有所不同的是前者和A,U,F,M命令一起使用时不能和通配符*和?搭配,而后者可以.另外注意RAR命令还以目录是否带有\来区分是否包含目录的文件,如果有\则不包含子目录.
-n<文件>,-x<文件>:前者仅包含指定的文件(如果使用文件列表则使用-n@<文件列表>命令),后者则要排除的指定文件(如果使用文件列表则使用-x@<文件列表>命令),都可以使用通配符,都可以多次使用该开关.如:rar a -r -n*.txt -n*.lst myrar c:\Project c:\Info实际是未简化的rar a -r myrar c:\Project\*.txt c:\Project\*.lst c:Info\*.txt c:\Info\*.lst命令;rar a -r -x*\temp -x*\temp\* savec c:\* 该命令将压缩C盘上除了TEMP文件夹目录及其里面所有文件,注意的是因为-x开关不能递归子目录,所以只有使用两次才能生效;rar x -x*.txt docs该命令从DOCS.RAR解压时把*.txt排除;
-e[+]<属性>:该命令排除(默认)或包含(使用+标记)指定掩码属性文件,属性可使用WIN版本的DSHA分别代表目录和文件的系统,隐藏和只读属性,如不压缩系统盘根目录的系统或隐藏属性的文件:rar a -esh myrar c:\;压缩系统盘所有的目录(不包含文件):rar a -r -e+d mydirs c:\

七.其他有用参数:
-ioff:在完成操作后关闭计算机,需要硬件必须支持断电功能且只有在Win32 版本可用.
-ieml[.][地址1;地址2;...]:如果发了email后要删除压缩包可以添加.到EMAIL地址,如rar a -ieml.xbd@sina.com mybak c:\boot,这个很容易被病毒利用.


所有开关及及其简易说明:
  ac            压缩或解压后清除存档属性
  ad            添加压缩文件名到目标路径
  ag[格式]      使用当前日期生成压缩文件名
  ao            添加具有压缩属性的文件
  ap<格式>      添加路径到压缩文件中
  as            同步压缩文件内容
  av            添加用户身份校验(仅注册版本可用)
  av-           禁用用户身份校验
  c-            禁用注释显示
  cfg-          禁用读取配置
  cl            名称转换为小写
  cu            名称转换为大写
  df            压缩后删除文件
  dh            打开共享文件
  ds            对固实压缩文件禁用名称排序
  e[+]<属性>    设置文件排除和包括属性
  ed            不添加空目录
  en            不添加"压缩文件结束"标志
  ep            从名称中排除路径
  ep1           从名称中排除基本目录
  ep2           展开为完整路径
  ep3           扩展路径为包含盘符的完全路径
  f             刷新文件
  hp[密码]      同时加密文件数据和文件头
  id[c,d,p,q]   禁用消息
  ieml[地址]    用 E-mail 发送压缩文件
  ierr          发送所有消息到标准错误设备
  ilog[名称]    把错误写到日志文件(只有注册版本可用)
  inul          禁用所有消息
  ioff          完成一个操作后关闭 PC 电源
  isnd          启用声音
  k             锁定压缩文件
  kb            保留损坏的已解压文件
  m<0..5>       设置压缩级别(0-存储...3-默认...5-最大)
  mc<参数>      设置高级压缩参数
  md<大小>      以KB为单位的字典大小(64,128,256,512,1024,2048,4096 or A-G)
  ms[ext;ext]   指定存储的文件类型
  mt<线程>      设置线程数
  n<文件>       仅包含指定的文件
  n@            从标准输入设备读取文件名到包括
  n@<列表>      在指定的文件列表包括文件
  o+            覆盖已存在文件
  o-            不覆盖已存在文件
  oc            设置 NTFS 压缩属性
  or            自动重命名文件
  os            保存 NTFS 流
  ow            保存或恢复文件所有者和组
  p[密码]       设置密码
  p-            不询问密码
  r             递归子目录
  r0            仅递归通配符名称的子目录
  ri<P>[:<S>]   设置优先级(0-默认,1-最小..15-最大)和以毫秒为单位的休眠时间
  rr[N]         添加数据恢复记录
  rv[N]         创建恢复卷
  s[<N>,v[-],e] 创建固实压缩文件
  s-            禁用固实压缩文件
  sc<chr><obj>  指定字符集
  sfx[名称]     创建自解压压缩文件
  st[名称]      从标准输入设备读取数据(stdin)
  sl<大小>      处理小于指定大小的文件
  sm<大小>      处理超过指定大小的文件
  t             压缩后测试文件
  ta<日期>      添加日期 <日期> 后修改的文件,日期格式 YYYYMMDDHHMMSS
  tb<日期>      添加日期 <日期> 前修改的文件,日期格式 YYYYMMDDHHMMSS
  tk            保留原始压缩文件时间
  tl            设置压缩文件时间为最新文件时间
  tn<时间>      添加 <时间> 以后的文件
  to<时间>      添加 <时间> 以前的文件
  ts<m,c,a>[N]  保存或恢复文件时间(修改,创建,访问)
  u             更新文件
  v             自动检测创建卷的大小或者列出所有的卷
  v<大小>[k,b]  创建卷大小=<大小>*1000 [*1024, *1]
  vd            创建容量前清除磁盘内容
  ver[n]        文件版本控制
  vn            使用旧风格的卷命名方案
  vp            每卷之前暂停
  w<路径>       指定工作目录
  x<文件>       排除指定的文件
  x@            从标准输入设备读取要排除的文件名
  x@<列表>      排除指定列表文件中的文件
  y             假设对全部询问都回答是
  z[文件]       从文件读取压缩文件注释